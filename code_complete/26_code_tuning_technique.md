# 代码调整技术

通过调整代码，达到性能提升。

需要特别注意的是，对性能的提升可能带来可读性的下降。**因此调整代码时需要考虑，牺牲可读性究竟带来了多少的性能提升，性能的提升必须明确被测量。**

## 逻辑
- 知道答案后立即停止
- 按照出现的频率来调整判断顺序
  
  让`运行最快`和`判断结果最可能为真的判断`优先被执行
- 使用简单查询代替复杂表达式

  书中举了对`A/B/C`对象分组的例子（感觉十分的贴切）

- 惰性求值

## 循环

- 将判断外提。如果判断可以在循环外预先确定，则不应该放在循环内部。（*不过这样提升代码的维护难度，谨慎使用*）
- 编写高效率的循环的关键在于尽可能减少循环内部所做的工作。
- 在列表的最后增加哨兵值，减少每次循环中判断的次数
  - 这个感觉其实是上一点的一种实践
- 把最忙的循环放在最内层

  **把最长的循环放在最内层**
  
  例如一个三层for循环分别为 500 * 2 * 2。如果将500放在最内层，则总的便利次数为 2 + 2*2 + 500 * 2 * 2。如果将500的循环放在最外层，则总的遍历次数为 500 + 500 * 2 + 500 * 2 * 2

- 削减每次循环中的计算强度，比如用加法替换乘法。
